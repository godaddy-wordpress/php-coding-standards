<?xml version="1.0"?>
<ruleset name="SkyVerge PHP Base" namespace="SkyVerge\Standards\PHP">

	<description>SkyVerge PHP Coding Standards</description>


	<!-- Configuration -->

	<!-- show sniff codes and show progress -->
	<arg value="sp"/>
	<!-- Only sniff PHP files -->
	<arg name="extensions" value="php"/>
	<!-- Run up to 8 processes in parallel -->
	<arg name="parallel" value="8"/>


	<!-- Sniffs -->
	<!-- Don't allow more than one consecutive blank line (in default cases - does not apply to between functions, etc.) -->
	<rule ref="Squiz.WhiteSpace.SuperfluousWhitespace" />

	<!-- 1 space after a 'not' operator e.g. if ( ! $something ) {} -->
	<rule ref="Generic.Formatting.SpaceAfterNot" />

	<!-- 1 space after a type cast e.g. (int) $somevar -->
	<rule ref="Generic.Formatting.SpaceAfterCast" />

    <!-- Run against the PHPCompatibilityWP ruleset -->
    <rule ref="PHPCompatibilityWP" />

    <!-- Check for cross-version support for PHP 7.4 and higher. -->
    <config name="testVersion" value="7.4-"/>

    <!-- WordPress Exclusions -->
    <rule ref="WordPress">
        <exclude name="WordPress.DB.DirectDatabaseQuery.NoCaching" />
        <exclude name="WordPress.DB.DirectDatabaseQuery.DirectQuery" />
        <exclude name="WordPress.DB.DirectDatabaseQuery.SchemaChange" />
    </rule>

    <!-- WooCommerce Sanitization / Escaping Functions -->
    <rule ref="WordPress.Security.ValidatedSanitizedInput">
        <properties>
            <property name="customSanitizingFunctions" type="array">
                <element value="wc_clean"/>
                <element value="wc_sanitize_tooltip"/>
                <element value="wc_format_decimal"/>
                <element value="wc_stock_amount"/>
                <element value="wc_sanitize_permalink"/>
                <element value="wc_sanitize_textarea"/>
            </property>
        </properties>
    </rule>

    <rule ref="WordPress.Security.EscapeOutput">
        <properties>
            <property name="customEscapingFunctions" type="array">
                <element value="wc_help_tip"/>
                <element value="wc_sanitize_tooltip"/>
                <element value="wc_selected"/>
                <element value="wc_kses_notice"/>
                <element value="wc_esc_json"/>
                <element value="wc_query_string_form_fields"/>
                <element value="wc_make_phone_clickable"/>
            </property>
        </properties>
    </rule>
</ruleset>
